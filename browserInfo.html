<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <link rel="stylesheet" type="text/css" href="result.css">
    <title>Leaks</title>
</head>
<body>
    <h1><strong>Browser Info</strong></h1>

    <!-- Altre informazioni -->
    <p><strong>Supporto ai Web Workers:</strong> <span id="webWorkersSupported">Caricamento...</span></p>
    <p><strong>Supporto alle Media Queries:</strong> <span id="mediaQueriesSupported">Caricamento...</span></p>
    <p><strong>Informazioni sulla posizione geografica:</strong> <span id="geolocationInfo">Caricamento...</span></p>
    <!-- Mappa -->
    <iframe id="mapFrame" width="50%" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" style="display: none;" src=""></iframe>

    <p><strong>Supporto ai sensori:</strong> <span id="sensorsSupported">Caricamento...</span></p>

    <p><strong>Numero di threads:</strong> <span id="cpuThreads">Caricamento...</span></p>
    <p><strong>Numero di core:</strong> <span id="cpuCores">Caricamento...</span></p>
    <p><strong>Dettagli sui protocolli di sicurezza:</strong> <span id="securityProtocols">Caricamento...</span></p>

    <p><strong>Tipi di MIME supportati:</strong> <span id="mimeTypes">Caricamento...</span></p>
    <p><strong>Supporto alla WebAssembly:</strong> <span id="webAssemblySupport">Caricamento...</span></p>
    <p><strong>Color Depth:</strong> <span id="colorDepth">Caricamento...</span></p>
    <p><strong>Pixel Depth:</strong> <span id="pixelDepth">Caricamento...</span></p>
    <p><strong>Touch Support:</strong> <span id="touchSupport">Caricamento...</span></p>
    <p><strong>Referrer Policy:</strong> <span id="referrerPolicy">Caricamento...</span></p>
    <p><strong>Supporto alle Web Notifications:</strong> <span id="webNotificationsSupported">Caricamento...</span></p>
    <p><strong>Supporto alla Payment Request API:</strong> <span id="paymentRequestAPISupported">Caricamento...</span></p>
    <p><strong>Supporto alla Permissions API:</strong> <span id="permissionsAPISupported">Caricamento...</span></p>
    <p><strong>Compatibilità con HTML5 e CSS3:</strong> <span id="htmlCssSupport">Caricamento...</span></p>

    <script>
        // Funzione per verificare il supporto ai Web Workers
        function checkWebWorkersSupport() {
            const webWorkersSupported = typeof(Worker) !== 'undefined';
            const webWorkersSupportedElement = document.getElementById('webWorkersSupported');

            if (webWorkersSupportedElement) {
                webWorkersSupportedElement.innerText = (webWorkersSupported ? 'Sì' : 'No');
            } else {
                console.error('Elemento con id "webWorkersSupported" non trovato.');
            }
        }

        // Funzione per verificare il supporto alle Media Queries
        function checkMediaQueriesSupport() {
            const mediaQueriesSupported = window.matchMedia('(pointer: fine)').matches;
            const mediaQueriesSupportedElement = document.getElementById('mediaQueriesSupported');

            if (mediaQueriesSupportedElement) {
                mediaQueriesSupportedElement.innerText = (mediaQueriesSupported ? 'Sì' : 'No');
            } else {
                console.error('Elemento con id "mediaQueriesSupported" non trovato.');
            }
        }

        // Funzione per ottenere informazioni sulla posizione geografica
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                const geolocationInfoElement = document.getElementById('geolocationInfo');
                if (geolocationInfoElement) {
                    geolocationInfoElement.innerText = 'Geolocalizzazione non supportata dal browser.';
                } else {
                    console.error('Elemento con id "geolocationInfo" non trovato.');
                }
            }
        }

        function showPosition(position) {
            const geolocationInfoElement = document.getElementById('geolocationInfo');
            const mapFrame = document.getElementById('mapFrame');
            if (geolocationInfoElement && mapFrame) {
                let Latitude = position.coords.latitude;
                let Longitude = position.coords.longitude;
                
                geolocationInfoElement.innerText = 'Latitudine: ' + Latitude + '°, Longitudine: ' + Longitude + '°';
                
                // Costruisci l'URL dell'iframe utilizzando le variabili di latitudine e longitudine
                var mapUrl = "https://www.openstreetmap.org/export/embed.html?bbox=";
                mapUrl += (Longitude - 0.01) + "," + (Latitude - 0.01) + "," + (Longitude + 0.01) + "," + (Latitude + 0.01);
                mapUrl += "&layer=mapnik&marker=" + Latitude + "," + Longitude;

                // Imposta l'attributo src dell'iframe con l'URL della mappa
                mapFrame.setAttribute('src', mapUrl);
                // Mostra la mappa
                mapFrame.style.display = 'block';
            } else {
                console.error('Elemento con id "geolocationInfo" o "mapFrame" non trovato.');
            }
        }

        function showError(error) {
            const geolocationInfoElement = document.getElementById('geolocationInfo');
            const mapFrame = document.getElementById('mapFrame');
            if (geolocationInfoElement) {
                geolocationInfoElement.innerText = 'Errore durante l\'ottenimento della posizione: ' + error.message;
                
                // Ottieni una posizione approssimativa tramite l'API ipinfo.io
                fetch('https://ipinfo.io/json?token=be364e973667a6')
                    .then(response => response.json())
                    .then(data => {
                        const loc = data.loc.split(',');
                        const Latitude = parseFloat(loc[0]);
                        const Longitude = parseFloat(loc[1]);
                        
                        geolocationInfoElement.innerText += ` (Posizione approssimativa: Latitudine: ${Latitude}°, Longitudine: ${Longitude}°)`;
                        
                        // Costruisci l'URL dell'iframe utilizzando le variabili di latitudine e longitudine approssimative
                        var mapUrl = "https://www.openstreetmap.org/export/embed.html?bbox=";
                        mapUrl += (Longitude - 0.1) + "," + (Latitude - 0.1) + "," + (Longitude + 0.1) + "," + (Latitude + 0.1);
                        mapUrl += "&layer=mapnik&marker=" + Latitude + "," + Longitude;

                        // Imposta l'attributo src dell'iframe con l'URL della mappa
                        mapFrame.setAttribute('src', mapUrl);
                        // Mostra la mappa
                        mapFrame.style.display = 'block';
                    })
                    .catch(err => console.error('Errore durante l\'ottenimento della posizione approssimativa:', err));
            } else {
                console.error('Elemento con id "geolocationInfo" non trovato.');
            }
        }

        // Funzione per verificare il supporto ai sensori
        function checkSensorSupport() {
            const accelerometerSupported = 'LinearAccelerationSensor' in window ? 'Si' : 'N/D';
            const gyroscopeSupported = 'Gyroscope' in window ? 'Si' : 'N/D';
            const magnetometerSupported = 'Magnetometer' in window ? 'Si' : 'N/D';
            const sensorsSupportedElement = document.getElementById('sensorsSupported');

            if (sensorsSupportedElement) {
                sensorsSupportedElement.innerText = 'Accelerometro: ' + accelerometerSupported + ', Giroscopio: ' + gyroscopeSupported + ', Magnetometro: ' + magnetometerSupported;
            } else {
                console.error('Elemento con id "sensorsSupported" non trovato.');
            }
        }

        // Funzione per ottenere il numero di threads e calcolare i core
        function getCPUThreadsAndCores() {
            const cpuThreads = navigator.hardwareConcurrency ? navigator.hardwareConcurrency : "N/D";
            const cpuCores = cpuThreads !== "N/D" ? Math.ceil(cpuThreads / 2) : "N/D";
            const cpuThreadsElement = document.getElementById('cpuThreads');
            const cpuCoresElement = document.getElementById('cpuCores');

            if (cpuThreadsElement) {
                cpuThreadsElement.innerText = cpuThreads + " threads";
            } else {
                console.error('Elemento con id "cpuThreads" non trovato.');
            }

            if (cpuCoresElement) {
                cpuCoresElement.innerText = cpuCores + " core";
            } else {
                console.error('Elemento con id "cpuCores" non trovato.');
            }
        }

        // Funzione per ottenere dettagli sui protocolli di sicurezza
        function getSecurityProtocols() {
            const securityProtocols = "TLS 1.2, TLS 1.3";
            const securityProtocolsElement = document.getElementById('securityProtocols');

            if (securityProtocolsElement) {
                securityProtocolsElement.innerText = securityProtocols;
            } else {
                console.error('Elemento con id "securityProtocols" non trovato.');
            }
        }

        // Funzione per ottenere i tipi di MIME supportati
        function getMimeTypes() {
            const mimeTypes = Array.from(navigator.mimeTypes).map(mt => mt.type);
            const mimeTypesElement = document.getElementById('mimeTypes');

            if (mimeTypesElement) {
                mimeTypesElement.innerText = mimeTypes.join(', ');
            } else {
                console.error('Elemento con id "mimeTypes" non trovato.');
            }
        }

        // Funzione per verificare il supporto alla WebAssembly
        function checkWebAssemblySupport() {
            const webAssemblySupport = typeof WebAssembly === 'object' ? 'Sì' : 'No';
            const webAssemblySupportElement = document.getElementById('webAssemblySupport');

            if (webAssemblySupportElement) {
                webAssemblySupportElement.innerText = webAssemblySupport;
            } else {
                console.error('Elemento con id "webAssemblySupport" non trovato.');
            }
        }

        // Funzione per ottenere il Color Depth
        function getColorDepth() {
            const colorDepth = screen.colorDepth || screen.pixelDepth;
            const colorDepthElement = document.getElementById('colorDepth');

            if (colorDepthElement) {
                colorDepthElement.innerText = colorDepth;
            } else {
                console.error('Elemento con id "colorDepth" non trovato.');
            }
        }

        // Funzione per ottenere il Pixel Depth
        function getPixelDepth() {
            const pixelDepth = screen.pixelDepth;
            const pixelDepthElement = document.getElementById('pixelDepth');

            if (pixelDepthElement) {
                pixelDepthElement.innerText = pixelDepth;
            } else {
                console.error('Elemento con id "pixelDepth" non trovato.');
            }
        }

        // Funzione per verificare il supporto al Touch
        function checkTouchSupport() {
            const touchSupport = ('ontouchstart' in window || navigator.maxTouchPoints > 0 || window.DocumentTouch && document instanceof DocumentTouch) ? 'Sì' : 'No';
            const touchSupportElement = document.getElementById('touchSupport');

            if (touchSupportElement) {
                touchSupportElement.innerText = touchSupport;
            } else {
                console.error('Elemento con id "touchSupport" non trovato.');
            }
        }

        // Funzione per ottenere la Referrer Policy
        function getReferrerPolicy() {
            const metaTags = document.getElementsByTagName('meta');
            let referrerPolicy = 'N/D';

            for (let i = 0; i < metaTags.length; i++) {
                if (metaTags[i].getAttribute('name') === 'referrer') {
                    referrerPolicy = metaTags[i].getAttribute('content');
                    break;
                }
            }

            const referrerPolicyElement = document.getElementById('referrerPolicy');

            if (referrerPolicyElement) {
                referrerPolicyElement.innerText = referrerPolicy;
            } else {
                console.error('Elemento con id "referrerPolicy" non trovato.');
            }
        }

        // Funzione per verificare il supporto alle Web Notifications
        function checkWebNotificationsSupport() {
            const webNotificationsSupported = 'Notification' in window;
            const webNotificationsSupportedElement = document.getElementById('webNotificationsSupported');

            if (webNotificationsSupportedElement) {
                webNotificationsSupportedElement.innerText = (webNotificationsSupported ? 'Sì' : 'No');
            } else {
                console.error('Elemento con id "webNotificationsSupported" non trovato.');
            }
        }

        // Funzione per verificare il supporto alla Payment Request API
        function checkPaymentRequestAPISupport() {
            const paymentRequestAPISupported = 'PaymentRequest' in window && 'show' in PaymentRequest.prototype;
            const paymentRequestAPISupportedElement = document.getElementById('paymentRequestAPISupported');

            if (paymentRequestAPISupportedElement) {
                paymentRequestAPISupportedElement.innerText = (paymentRequestAPISupported ? 'Sì' : 'No');
            } else {
                console.error('Elemento con id "paymentRequestAPISupported" non trovato.');
            }
        }

        // Funzione per verificare il supporto alla Permissions API
        function checkPermissionsAPISupport() {
            const permissionsAPISupported = 'permissions' in navigator && 'query' in navigator.permissions;
            const permissionsAPISupportedElement = document.getElementById('permissionsAPISupported');

            if (permissionsAPISupportedElement) {
                permissionsAPISupportedElement.innerText = (permissionsAPISupported ? 'Sì' : 'No');
            } else {
                console.error('Elemento con id "permissionsAPISupported" non trovato.');
            }
        }

        // Funzione per verificare la compatibilità con HTML5 e CSS3
        function checkHtmlCssSupport() {
            const html5Supported = 'querySelector' in document && 'localStorage' in window && 'addEventListener' in window;
            const css3Supported = 'flexBasis' in document.documentElement.style || 'webkitFlexBasis' in document.documentElement.style ||
                'msFlexBasis' in document.documentElement.style || 'flexDirection' in document.documentElement.style;
            const htmlCssSupportElement = document.getElementById('htmlCssSupport');

            if (htmlCssSupportElement) {
                htmlCssSupportElement.innerText = html5Supported && css3Supported ? 'Supportato' : 'Non supportato';
            } else {
                console.error('Elemento con id "htmlCssSupport" non trovato.');
            }
        }

        // Chiama le funzioni all'avvio della pagina
        checkWebWorkersSupport();
        checkMediaQueriesSupport();
        getLocation();
        checkSensorSupport();
        getCPUThreadsAndCores();
        getSecurityProtocols();
        getMimeTypes();
        checkWebAssemblySupport();
        getColorDepth();
        getPixelDepth();
        checkTouchSupport();
        getReferrerPolicy();
        checkWebNotificationsSupport();
        checkPaymentRequestAPISupport();
        checkPermissionsAPISupport();
        checkHtmlCssSupport();
    </script>
</body>
</html>
